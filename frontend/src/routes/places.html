<template>
    <require from="../widgets/vector-map"></require>
    <link rel="stylesheet" href="../../node_modules/flag-icon-css/css/flag-icon.min.css">
    <section>
        <span class="routeTitle">Places</span>
        <div class="mapContainer">
            <vector-map if.bind="values" values.bind="values" id="myMap" click-callback.call="toggleList($event, name)"></vector-map>
            <div class="columns">
                <div repeat.for="year of years" class="columnOfPosts">
                    <h3>${year._id.year}</h3>
                    <div class="placesList">
                        <div repeat.for="location of year.locations">
                            <div class="accordion" click.delegate="toggleList(location.countryCode)">&#xbb;<div class.bind='getCssFlag(location.countryCode)'></div>${location.country}</div>
                            <ul show.bind="show[location.countryCode]">
                                <li repeat.for="blogPost of location.posts">
                                    <a route-href="route: post; params.bind: { id: blogPost.id }">${blogPost.title}</a>
                                </li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>
</template>